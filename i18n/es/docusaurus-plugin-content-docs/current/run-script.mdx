---
slug: /
title: Ejecutar Script
description: Al activar el script Ejecutar a través de un gestor de eventos, usted puede lograr la ejecución secuencial de operaciones y realizar diferentes acciones basadas en diferentes condiciones.
---

# Ejecutar Script

Al activar el script Ejecutar a través de un gestor de eventos, usted puede lograr la ejecución secuencial de operaciones y realizar diferentes acciones basadas en diferentes condiciones.

## Cómo

<div style={{
    position: "relative",
    paddingBottom: "calc(56.81216931216932% + 41px)", 
    height: 0
    }}><iframe src="https://demo.arcade.software/r6dDc3eLjVfcrx2yGZnQ?embed" frameborder="0" loading="lazy" webkitallowfullscreen mozallowfullscreen allowfullscreen style={{position: "absolute", top: 0, left: 0, width: "100%", height: "100%", colorScheme: "light"}}></iframe></div>

### Demo

<div style={{
    position: "relative",
    paddingBottom: "calc(56.81216931216932% + 41px)", 
    height: 0
    }}><iframe src="https://builder.illacloud.com/illacloud_demo/deploy/app/ILAfx4p1C7Ac" frameborder="1" loading="lazy" webkitallowfullscreen mozallowfullscreen allowfullscreen style={{position: "absolute", top: 0, left: 0, width: "100%", height: "100%", colorScheme: "light"}}></iframe></div>

#### Ejecutar y fork

https://illa.ai/app/ILAfx4p1C7Ac/detalle

### Usar caso: Iniciar sesión y redirigir a diferentes páginas

<div style={{
    position: "relative",
    paddingBottom: "calc(56.81216931216932% + 41px)", 
    height: 0
    }}><iframe src="https://builder.illacloud.com/illacloud_demo/deploy/app/ILAex4p1C7Eh" frameborder="1" loading="lazy" webkitallowfullscreen mozallowfullscreen allowfullscreen style={{position: "absolute", top: 0, left: 0, width: "100%", height: "100%", colorScheme: "light"}}></iframe></div>

#### Ejecutar y fork

https://illa.ai/app/ILAex4p1C7Eh/detalle

## ILLA custom functions

### Acción de activación

#### Estructura

```JavaScript
const exampleData = await actionName.trigger();
```

El nombre de acción es la cadena que se muestra en la captura de pantalla, de la siguiente manera.

![1](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/1.png)

#### Descripción

En Ejecutar Script, la variable `exampleData` es la misma que `actionName.data`.

#### Ejemplo

Por ejemplo, usamos la acción `postgresql1` para consultar el correo electrónico de James.

![2](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/2.png)

Activar la acción a través de Ejecutar Script

![3](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/3.png)

`postgresql1.data` es

```JSON
[
  {
    "email": "James@outlook.com",
    "id": "1",
    "img": "https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=1600",
    "name": "James"
  }
]
```

Cuando necesitamos usar JavaScript para recuperar un correo electrónico en el Inspectivo del componente o en cualquier otro lugar, podemos usar lo siguiente: `{{postgresql1.data[0].email}}`

![4](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/4.png)

Y cuando necesitamos usar el correo electrónico en el "Ejecutar Script" después de ejecutar la instrucción `const exampleData = await postgresql1. rigger();`, podemos utilizar directamente `exampleData[0].email`.

Mostrar una notificación de éxito cuando la consulta es exitosa y el resultado es único. Mostrar una notificación de fallo cuando el resultado de la consulta no es único o cuando falla.

![5](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/5.png)

```JSON
const exampleData = await postgresql1.trigger();
//show email via notification when the length of the resulting array is 1.
if(exampleData.length==1){
utils. howNotification(
  {
    type:"info",
    title:"Recuperado con éxito",
    description:exampleData[0]. correo,
    duración: 4500}
);
  }else{
  //else, mostrar una notificación fallida
utils. howNotification(
  {
    type:"info",
    title:"Error al recuperar",
    duración: 4500
  }
);
};
```

### Mostrar notificación

#### Estructura

```JavaScript
utils.showNotification(
{
type: "info",
title: "Felicidades",
description: "Recuperado con éxito",
duración: 4500
}
)
```

#### Descripción

| Parámetro    | Descripción                                                           | Tipo de datos                                                                        | Ejemplo                                     |
| ------------ | --------------------------------------------------------------------- | ------------------------------------------------------------------------------------ | ------------------------------------------- |
| tipo         | Utilizado para establecer el tipo de icono en la notificación.        | String, uno de los siguientes valores:"info"`default`"success""error""warning"       | tipo: "información"                         |
| título       | Utilizado para establecer el título de la notificación                | Cadena                                                                               | title: "Felicidades"                        |
| descripción  | Utilizado para establecer la descripción                              | Cadena                                                                               | descripción: "Recuperado con éxito"         |
| duración     | Utilizado para establecer la duración de la notificación en pantalla. | Número, en milisegundos (ms)                                                         | duración: 4500                              |

#### Ejemplo

Mostrar notificación al hacer clic en el botón:

![6](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/6.png)

Es lo mismo que la acción Mostrar notificación, como muestra la siguiente captura de pantalla:

![7](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/7.png)

### Componente de control

#### Estructura

```JavaScript
componenteDisplayName.function()
```

componentDisplayName es la cadena que se muestra en la captura de pantalla, de la siguiente manera.

![8](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/8.png)

#### Descripción

##### setValue(parámetro)

Utilizado para establecer el valor. El parámetro podría ser un `string` o `number` o `object` o `boolean` o `array` que depende del tipo de componente.

###### Componentes soportados

| Componente                                                                                                                                                       | Tipo de parámetro                                                     | Ejemplo                                                                                                                                                                                     |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Entrada, texto editable, Área de texto, Divider, Selección, Grupo de Radio, Botón de Radio, Botón de Radio, Fecha, Fecha Hora, Pasos, Texto, Progreso de Bar     | `string`                                                              | `input1.setValue("Hola mundo")`                                                                                                                                                             |
| JSON Editor                                                                                                                                                      | `string`                                                              | jsonEditor1.setValue(`{ "firstName": "Chuck", "lastName": "Norris", "age": 80, "bio": "Roundhouse kking asses since 1940", "password": "None ed", "Todayhone": "1-800-KICKASS" }`)          |
| Línea de tiempo                                                                                                                                                  | `string`, Separa los valores de los diferentes nodos vía coma (,)     | `timeline1.setValue("El primer hito, el segundo hito")`                                                                                                                                     |
| Número de entrada, deslizador, tasa                                                                                                                              | `número`                                                              | `numberInput1.setValue(1000)`                                                                                                                                                               |
| Cambiar                                                                                                                                                          | `boolean`                                                             | `switch1.setValue(false)`                                                                                                                                                                   |
| Formulario de esquema JSON                                                                                                                                       | `objeto`                                                              | `jsonSchemaForm1.setValue({ "nombre": "Chuck", "apellido": "Norris", "edad": 80, "bio": "Broken de casa assa desde 1940", "contraseña": "ninguno", "miel": "1-800-KICKASS" })`              |
| Checkbox Group, Cascader                                                                                                                                         | `array`                                                               | `cascader1.setValue(["media_fuente_2","campaign_2-1"])`                                                                                                                                     |

##### clearValue()

Utilizado para limpiar el valor

###### Componentes soportados

Entrada, Entrada numérica, Texto editable, Área de Texto, Subir, Editor JSON, Formulario de Esquema JSON, Cambio, Selección, Multiselección, Grupo Checkbox Cascader, Grupo de Radio, Botón de Radio, Fecha; Rango de Fecha; Hora de Datos, Texto, Tarifa; Progreso de Barras, Curso de Círculo, Línea de Tiempo, Divider

###### Ejemplo

```JavaScript
input1.clearValue()
```

##### foco ()

Utilizado para centrarse en el componente

###### Componentes soportados

Entrada, Entrada numérica, Texto editable, Área de Texto, Editor JSON, Editor de Textos, Grupo de Radio, Grupo de Radio

###### Ejemplo

```JavaScript
input1.focus()
```

##### validate()

Cuando ha establecido condiciones de validación para un componente, tales como formato de correo electrónico, formato URL, o campo requerido, puedes usar la función `validate()` para determinar si cumple con los requisitos. Si no cumple con los requisitos, se mostrará un mensaje de validación.

Establecer las condiciones de validación:

![9](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/9.png)

Mostrar el mensaje de validación:

![10](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/10.png)

###### Componentes soportados

Entrada, Entrada numérica, Texto editable, Área de texto, Subir, Seleccionar, Multiseleccionar, Grupo de casillas de verificación, Radio Grupo, Botón de Radio, Fecha; Rango de Fecha; Hora de Fecha; Formulario, Tarifa

###### Ejemplo

```JavaScript
input1.validate()
```

##### clearValidation()

Utilizado para borrar el mensaje de validación.

###### Componentes soportados

Entrada, Entrada numérica, Texto editable, Área de texto, Subir, Seleccionar, Multiselect, Checkbox Group, Radio Botón, Fecha; Rango de fechas, Fecha Hora, Tasa

###### Ejemplo

```JavaScript
input1.clearValidation()
```

##### setValor seleccionado (matriz)

Utilizado para establecer el valor seleccionado de Multiselect. El parámetro debe ser una matriz.

###### Componentes soportados

Multiselección

###### Ejemplo

```JavaScript
multiselect1.setSelectedValue(["Opción 1", "Opción 3"])
```

##### envio()

Enviar datos del formulario. Cuando el método de envío se activa, primero validaremos los datos del formulario. Si hay errores de validación, se impedirá el envío del formulario y se mostrarán los mensajes de error correspondientes. Sólo después de la validación exitosa el envío se procede.

###### Componentes soportados

Formulario de esquema JSON

###### Ejemplo

```JavaScript
form1.submit()
```

##### toggle()

Utilizado para cambiar el valor de verdadero a falso o de falso a verdadero.

###### Componentes soportados

Cambiar

###### Ejemplo

```JavaScript
switch1.toggle()
```

##### setStartOfRange(number)

Utilizado para establecer el valor de inicio por defecto del deslizador de rango

###### Componentes soportados

Range Slider

###### Ejemplo

```JavaScript
rangeSlider1.setStartOfRange(1)
```

##### setEndOfRange(número)

Utilizado para establecer el valor final por defecto del deslizador de rango

###### Componentes soportados

Range Slider

###### Ejemplo

```JavaScript
rangeSlider1.setEndOfRange(9)
```

##### setStartValue(cadena)

Utilizado para establecer el valor de inicio por defecto

###### Componentes soportados

Rango de fecha, Rango de Tiempo

###### Ejemplo

```JavaScript
dateRange1.setStartValue("2023-09-09")
```

##### setEndValue(cadena)

Utilizado para establecer el valor final por defecto

###### Componentes soportados

Rango de fecha, Rango de Tiempo

###### Ejemplo

```JavaScript
dateRange1.setEndValue("2023-10-09")
```

##### setValueInArray(array)

Utilizado para establecer los interruptores cuyo valor es verdadero

###### Componentes soportados

Cambiar grupo

###### Ejemplo

```JavaScript
switchGroup1.setValueInArray(["Opción 1", "Opción 3"])
```

##### seleccionar página(número)

Utilizado para establecer el índice de la página a mostrar. El índice es un número a partir de 0.

###### Componentes soportados

Tabla

###### Ejemplo

```JavaScript
table1.selectPage(1)
```

##### selectRow(número)

Utilizado para establecer el índice de la fila seleccionada. El índice es un número a partir de 0.

###### Componentes soportados

Tabla

###### Ejemplo

```JavaScript
table1.selectRow(1)
```

##### clearSelection()

Utilizado para borrar la fila seleccionada.

###### Componentes soportados

Tabla

###### Ejemplo

```JavaScript
table1.clearSelection()
```

##### setFilters(array de objetos, cadena)

Utilizado para establecer filtros.

**El primer parámetro** es un array de objetos. Cada objeto representa una condición de filtrado. Incluye tres atributos:

**`id`** : Esto se refiere al id de esta columna. Si esta columna es un resultado de una consulta de base de datos, entonces el id sería el nombre de columna que obtuvo de la consulta. Por ejemplo, si la consulta es `SELECT email AS user_email FROM users` y renombrar `email` como `Email` usando el panel derecho de la tabla, el id de la columna seguiría siendo `user_email` Si esta columna se añade manualmente usando el botón `Add Column` en el panel derecho, puede comprobar su id en la sección `displayedData` del panel de la izquierda. Por lo general, será una cadena generada aleatoriamente comenzando con `column` como `column-320169e8-225a-482d-9853-ad34b3040220`.

**`filterFn`** : el tipo de coincidencia del filtro. Soportamos los siguientes tipos: `equalTo` que es el mismo que `=` en SQL, `notEqualTo` que es lo mismo que `<>` en SQL, `contains` que es lo mismo que `LIKE '%value%'` en SQL, `does NotContain` que es lo mismo que `NOT LIKE '%value%'` en SQL, `lessThan` que es lo mismo que `<` en SQL, `notLessThan` que es lo mismo que `>=` en SQL, `notMoreThan` que es lo mismo que `<=` en SQL, `empty` que es lo mismo que `IS NULL` en SQL, `notEmpty` que es lo mismo que `NO ES NULL` en SQL, `before` se utiliza para comparar hora o fecha, que es lo mismo que `>` en SQL, `after` se utiliza para comparar hora o fecha, que es lo mismo que `<` en SQL.

**`value`** : usado para establecer el valor para comparar.

**El segundo parámetro:** cuando hay múltiples objetos de condición de filtro, determina si tienen una relación "Y" o una relación "OR". Establécelo como una cadena `and` para una relación "AND", y `o` para una relación "OR".

###### Componentes soportados

Tabla

###### Ejemplo

```JavaScript
table1.setFilters([{"id":"month", "filterFn":"equalTo", "value":"May"}, {"id":"month", "filterFn":"equalTo", "value":"June"}], "o")
```

##### clearFilters()

Utilizado para borrar todos los filtros

###### Componentes soportados

Tabla

###### Ejemplo

```JavaScript
table1.clearFilters()
```

##### setSort(string, string)

Utilizado para establecer el orden. **El primer parámetro** es el id de la columna para ordenar el cual es un valor de cadena. El id es el mismo que el id mencionado en setFilters(array de objetos, cadena). **El segundo parámetro** es el orden de ordenación, tanto ascendente como descendente. Se establece usando un valor de cadena `ascend` o `descend`.

###### Componentes soportados

Tabla

###### Ejemplo

```JavaScript
table1.setSort("incomes", "descend")
```

##### setCurrentViewKey(cadena)

Use la tecla que es un valor de cadena de la vista para establecer la vista mostrada.

###### Componentes soportados

Contenedor

###### Ejemplo

```JavaScript
container1.setCurrentViewKey("Ver 2")
```

##### establecer Índice (número)

Utilice el índice que es un valor numérico a partir de 0 de la vista para establecer la vista mostrada.

###### Componentes soportados

Contenedor

###### Ejemplo

```JavaScript
contenedor1.setCurrentViewIndex(1)
```

##### mostrarVistaNext(booleano)

Utilizado para mostrar la siguiente vista. El parámetro es un valor booleano que determina si bucle desde el final hasta el comienzo.

###### Componentes soportados

Contenedor

###### Ejemplo

```JavaScript
container1.showNextView(true)
```

##### mostrarVisibleView(boolean)

Utilizado para mostrar la siguiente vista visible. A diferencia del comportamiento de la función `showNextView(boolean)`, esta función ofrece una funcionalidad mejorada de cambio de vista omitiendo cualquier vista oculta durante la transición. El parámetro es un valor booleano que determina si bucle desde el final hasta el comienzo.

###### Componentes soportados

Contenedor

###### Ejemplo

```JavaScript
contenedor1.showNextVisibleView(false)
```

##### mostrarView()

Utilizado para mostrar la vista anterior. El parámetro es un valor booleano que determina si bucle desde el inicio hasta el final.

###### Componentes soportados

Contenedor

###### Ejemplo

```JavaScript
contenedor1.showPreviousView(true)
```

##### mostrar VisibleView()

Utilizado para mostrar la vista visible anterior. A diferencia del comportamiento de la función `showPreviousView(boolean)`, esta función ofrece una funcionalidad mejorada de cambio de vista omitiendo cualquier vista oculta durante la transición. El parámetro es un valor booleano que determina si bucle desde el inicio hasta el final.

###### Componentes soportados

Contenedor

###### Ejemplo

```JavaScript
contenedor1.showPreviousVisibleView(true)
```

##### reset()

Utilizado para restablecer el valor por defecto.

###### Componentes soportados

Forma

###### Ejemplo

```JavaScript
form1.reset()
```

##### resetValue()

Utilizado para restablecer el valor por defecto.

###### Componentes soportados

Pasos

###### Ejemplo

```JavaScript
pasos1.resetValue()
```

##### openModal()

Utilizado para abrir una modal

###### Componentes soportados

Modal

###### Ejemplo

```JavaScript
modal1.openModal()
```

##### cerrarModal()

Utilizado para cerrar una modal

###### Componentes soportados

Modal

###### Ejemplo

```JavaScript
modal1.closeModal()
```

##### setImageUrl(cadena)

Utilizado para establecer la URL de la fuente de imagen. Puede ser un Base64 o una URL que apunte a una imagen en la web.

###### Componentes soportados

Imagen

###### Ejemplo

```JavaScript
image1.setImageUrl("https://cloud-api.illacloud.com/drive/f/83095b77-1180-487e-86db-ff117e6083e5")
```

```JavaScript
image1.setImageUrl("data:image/png;base64,iVBORw0KGgoAA...II=")
```

##### clearReplyMessage()

Utilizado para borrar el mensaje de respuesta citado encima de la casilla de entrada.

###### Componentes soportados

Chatear

###### Ejemplo

```JavaScript
chat1.clearReplyMessage()
```

##### establecer valor primario (número)

Utilizado para establecer el valor principal de las estadísticas.

###### Componentes soportados

Estadísticas

###### Ejemplo

```JavaScript
estadística1.valor primario(100)
```

##### resetear valor primario()

Utilizado para restablecer el valor primario al valor primario predeterminado de las estadísticas.

###### Componentes soportados

Estadísticas

###### Ejemplo

```JavaScript
estadística1.resetPrimaryValue()
```

##### setFileUrl(cadena)

Utilizado para establecer la URL del archivo. Puede ser un Base64 o una URL que apunte a un PDF en la web.

###### Componentes soportados

DF

###### Ejemplo

```JavaScript
pdf1.setFileUrl("https://upload.wikimedia.org/wikipedia/commons/e/ee/Guideline_No._GD-Ed-2214_Marman_Clamp_Systems_Design_Guidelines.pdf")
```

##### play()

Utilizado para reproducir vídeo o audio.

###### Componentes soportados

Video, audio

###### Ejemplo

```JavaScript
video1.play()
```

##### pausa()

Utilizado para pausar vídeo o audio.

###### Componentes soportados

Video, audio

###### Ejemplo

```JavaScript
video1.pausa()
```

##### showControls(booleano)

Utilizado para establecer si mostrar o no los controles.

###### Componentes soportados

Vídeo

###### Ejemplo

```JavaScript
video1.showControls(true)
```

##### setVideoUrl(cadena)

Utilizado para establecer la URL del vídeo. Puede ser una URL Base64 o una URL de vídeo en sitios web de medios.

###### Componentes soportados

Vídeo

###### Ejemplo

```JavaScript
video1.setVideoUrl("https://youtu.be/8sUovZlBh_M")
```

##### setVolume(número)

Utilizado para establecer el volumen. El parámetro es un valor de número entre 0 y 1.

###### Componentes soportados

Video, audio

###### Ejemplo

`video1.setVolume(0.5)`

##### setSpeed(número)

Utilizado para establecer la velocidad. El parámetro es un valor numérico entre 0.25 y 2.

###### Componentes soportados

Video, audio

###### Ejemplo

```JavaScript
video1.setSpeed(0.5)
```

##### setLoop(booleano)

Utilizado para establecer si desea hacer bucle o no la reproducción.

###### Componentes soportados

Video, audio

###### Ejemplo

```JavaScript
video1.setLoop(falso)
```

##### buscar a (número)

Utilizado para buscar una posición de tiempo específica. El parámetro es un valor numérico, medido en segundos (s). Por ejemplo, para buscar a la posición de tiempo 5:35, usaría el valor 35.

###### Componentes soportados

Video, audio

###### Ejemplo

```JavaScript
video1.seekTo(335)
```

##### mute(boolean)

Utilizado para silenciar o no.

###### Componentes soportados

Video, audio

###### Ejemplo

```JavaScript
video1.mute(true)
```

##### setAudioUrl(cadena)

Utilizado para establecer la URL del audio. Puede ser una URL Base64 o una URL de vídeo en sitios web de medios.

###### Componentes soportados

Audio

###### Ejemplo

```JavaScript
video1.setAudioUrl("https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3")
```

##### slickNext()

Utilizado para cambiar a la siguiente imagen.

###### Componentes soportados

Carousel

###### Ejemplo

```JavaScript
carousel1.slickNext()
```

##### slickPrevious()

Utilizado para cambiar a la imagen anterior.

###### Componentes soportados

Carousel

###### Ejemplo

```JavaScript
carrusel1.slickPrevious()
```

##### setSrc()

Utilizado para establecer la URL de origen de IFrame.

###### Componentes soportados

IFrame

###### Ejemplo

```JavaScript
iframe1.set)[video] c("https://www.nasa.gov/")
```

##### setMarkers(array)

Utilizado para establecer los marcadores en el mapa. El parámetro debe ser una matriz de objetos. Los campos de latitud y longitud de cada objeto deben ser los mismos que los campos establecidos en el panel de la derecha

###### Componentes soportados

Mapa

###### Ejemplo

```JavaScript
map1.setMarkers([
{
    "lat":57.14009563040699,
    "lng":-114.6018657894011
 },{
     "lat":55.40432513713809,
     "lng":-112.98252263795787
 },{
     "lat":57.841288754888545,
     "lng":-103.3518657894011
 }
])
```

##### resetMarkers()

Utilizado para restablecer los marcadores a los marcadores predeterminados.

###### Componentes soportados

Mapa

###### Ejemplo

```JavaScript
map1.resetMarkers()
```

### Ir a la URL

#### Estructura

```JavaScript
utils.goToURL({
url:string,
newTab:boolean
})
```

#### Descripción

Usa un objeto para establecerlo. Hay 2 atributos en el objeto. El primer atributo es `url`. Su valor es una URL completa, incluyendo 'https://' o 'http://', y es de tipo cadena. El segundo atributo es `newTab`. Es un booleano utilizado para establecer si abrir o no la URL en una nueva pestaña.

#### Ejemplo

```JavaScript
utils.goToURL({
url:"https://www.illacloud.com",
newTab:true
})
```

### Copiar al portapapeles

#### Estructura

```JavaScript
utils.copyToClipboard(cadena)
```

#### Descripción

Utilizado para copiar una cadena

#### Ejemplo

```JavaScript
utils.copyToClipboard("El texto a copiar")
```

### Configurar router

#### Estructura

```JavaScript
utils.setRouter({
pagePath:string;
viewPath:string
})
```

#### Descripción

Utilizado para cambiar la página en aplicaciones ILLA. Hay 2 atributos en el objeto.

El primer atributo es `pagePath`. El valor de pagePath se muestra en la siguiente captura de pantalla sin `/`.

![11](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/11.png)

El segundo atributo es `viewPath`. El valor de viewPath se muestra en la siguiente captura de pantalla sin `/`.

![12](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/12.png)

#### Ejemplo

```JavaScript
utils.setRouter({
pagePath:"page2", 
viewPath:"sub-page1"
})
```

### Guardar en ILLA Drive

#### Estructura

```JavaScript
utils.saveToILLADrive({
fileName:string,
fileData:string,
fileType:string,
folder:string,
allowAnonymous:boolean,
replace:boolean
})
```

#### Descripción

Utilizado para guardar un archivo en ILLA Drive.

`fileName`: Nombre con extensión del archivo después de subir a la unidad de ILLA.

`fileData`: Base64 o datos de archivos crudos, como JSON, CSV, texto plano, etc.

`fileType`: Uno de los siguientes valores: Auto, Texto Plano, JPEG, PNG, SVG, JSON, CSV, TSV, Excel(.xlsx). Al usar "Auto", intentaremos determinar el tipo de archivo basado en la extensión del archivo o en los datos del archivo.

`carpeta`: Carpeta destino para subir archivos. Deje en blanco para subir a la carpeta raíz.

`allowAnonymous`: Se utiliza para establecer si se permite el acceso anónimo al usuario. Si planea establecer su aplicación como pública, el acceso anónimo debe estar habilitado. Para la seguridad de sus datos, los archivos o carpetas accesibles anónimamente deben ser colocados en la carpeta anónima.

![13](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/13.png)

`replace`: Se utiliza para establecer cuando hay archivos con el mismo nombre en el mismo directorio, reemplazar el archivo existente con un nuevo archivo o renombrar automáticamente el nuevo archivo.

#### Ejemplo

```JavaScript
//use upload1 para elegir archivos del dispositivo y subir a la carpeta de aplicaciones. 
utils.saveToILLADrive({
fileName:upload1.files[0].name,
fileData:upload1. iles[0].dataURI,
fileType:"PNG",
carpeta:"apps",
allowAnonymous:false,
replace:true
})
```

```JavaScript
//upload un archivo de texto.  
utils.saveToILLADrive({
fileName:"test.txt",
fileData:"abc",
fileType:"Plain text",
folder:"apps",
allowAnonymous:false,
replace:true
})
```

### Descargar de ILLA Drive

#### Estructura

```JavaScript
utils.downloadFromILLADrive({
    downloadInfo:[{
        tinyURL:string,
        fileID:string
        }],
    asZip:boolean
})
```

#### Descripción

Utilizado para descargar archivos de ILLA Drive.

`downloadInfo`: un array de objetos incluyendo tinyURL y fileID. Puede utilizar el selector de archivos de Drive de componentes para seleccionar archivos de ILLA Drive y obtener el `downloadInfo` a través de drivePicker1.value

`asZip`: usado para establecer si descargar o no los archivos como un Zip.

#### Ejemplo

```JavaScript
utils.downloadFromILLADrive({
    downloadInfo:drivePicker1.value,
    asZip:true
})
```

### Descargar

#### Estructura

```JavaScript
utils.downloadFile({
    fileType:string,
    fileName:string,
    data:anyType
})
```

#### Descripción

Utilizado para exportar datos a tu dispositivo.

`fileType`: Uno de los siguientes valores: Auto, Texto Plano, JPEG, PNG, SVG, JSON, CSV, TSV, Excel(.xlsx). Al usar "Auto", intentaremos determinar el tipo de archivo basado en la extensión del archivo o en los datos del archivo.

`fileName`: un nombre con extensión.

`data`: datos del archivo.

#### Ejemplo

```JavaScript
//descarga los datos de la tabla como un CSV
utils.downloadFile({
    fileType:"CSV",
    fileName:"text.csv",
    data: table2.datdeeourceJS
})
```

```JavaScript
//download image
utils.downloadFile({
    fileType:"PNG",
    fileName:"text.png",
    data: image1.image.Uc
})
```

### Establecer datos globales

#### Establecer valor global de datos

##### Estructura

```JavaScript
utils.setGlobalDataValue({
key:string, 
value:any
})
```

##### Descripción

Utilizado para establecer el valor de CopyalData

`key`: el displayName de globalData como muestra la siguiente captura de pantalla.

![14](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/14.png)

`value`: el valor a establecer

##### Ejemplo

```JavaScript
//use input5 para obtener el valor de entrada del usuario y establecer como el valor de stringState. 
utils.setGlobalDataValue({
key:"stringState", 
value:input5.value
})
```

#### Establecer datos globales en

##### Estructura

```JavaScript
utils.setGlobalDataIn({
key:string, 
path:string, 
value:any
})
```

##### Descripción

Cuando los datos globales son un array u objeto, use setGlobalDataIn para modificar el valor correspondiente a un índice específico en una matriz o para modificar el valor correspondiente a una clave específica en un objeto.

`key`: el displayName de globalData.

`path`: el índice del valor que pretende actualizar en la matriz o la clave en el objeto. Por ejemplo, para establecer el segundo valor en la matriz, la ruta es 1 (el índice). Para establecer el valor del atributo llamado key1, la ruta es key1.

`value`: el valor a establecer

##### Ejemplo

```JavaScript
//objectState es un objeto: {"key1":"value1", "key2":"value2"}, para establecer el 
utils.setGlobalDataIn({
key:"objectState", 
path:"key2", 
value:input7.value
})
```

## Bibliotecas integradas

| **Biblioteca**    | **Doc**                                                               | **Cómo usarlo en el Constructor de ILLA** | **Ejemplo**                                                         |
| ----------------- | --------------------------------------------------------------------- | ----------------------------------------- | ------------------------------------------------------------------- |
| Lodash            | https://lodash.com/docs/4.17.15                                       | `_`                                       | `_.concat(array, 2, [3], [[4]]);`                                   |
| Días              | https://day.js.org/                                                   | `dayjs`                                   | `dayjs(new Date())`                                                 |
| uuid              | <https://www.npmjs.com/package/uuid>                                  | `uuid`                                    | `uuid.parse()`                                                      |
| numbro            | https://numbrojs.com/                                                 | `numbro`                                  | `numbro(1000).format({thousandSeparated: true})`                    |
| Papa              | https://www.papaparse.com/docs                                        | `Papa`                                    | `Papa.parse(url, {download: true, // resto de configuración ... })` |

## Valor de las acciones, componentes...

Usa `displayName.xxx` para usar el valor de acciones, componentes, u otros globalData. Tenga en cuenta que en el script Ejecutar, estas variables pueden ser accedidas directamente sin usar las referencias `{{`.

```JavaScript
utils.downloadFromILLADrive({
    downloadInfo:{{drivePicker1.value}},/❌ 
    asZip:true
})

utils.downloadFromILLADrive({
    downloadInfo:drivePicker1.value,//:check_mark_button:
    asZip:true
})
```
