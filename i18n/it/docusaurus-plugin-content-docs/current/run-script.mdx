---
title: Esegui Script
description: Attivando Esegui script attraverso un gestore evento, è possibile ottenere l'esecuzione sequenziale delle operazioni ed eseguire diverse azioni in base a diverse condizioni.
---

# Esegui Script

Attivando Esegui script attraverso un gestore evento, è possibile ottenere l'esecuzione sequenziale delle operazioni ed eseguire diverse azioni in base a diverse condizioni.

## Come

<div style={{
    position: "relative",
    paddingBottom: "calc(56.81216931216932% + 41px)", 
    height: 0
    }}><iframe src="https://demo.arcade.software/r6dDc3eLjVfcrx2yGZnQ?embed" frameborder="0" loading="lazy" webkitallowfullscreen mozallowfullscreen allowfullscreen style={{position: "absolute", top: 0, left: 0, width: "100%", height: "100%", colorScheme: "light"}}></iframe></div>

### Demo

<div style={{
    position: "relative",
    paddingBottom: "calc(56.81216931216932% + 41px)", 
    height: 0
    }}><iframe src="https://builder.illacloud.com/illacloud_demo/deploy/app/ILAfx4p1C7Ac" frameborder="1" loading="lazy" webkitallowfullscreen mozallowfullscreen allowfullscreen style={{position: "absolute", top: 0, left: 0, width: "100%", height: "100%", colorScheme: "light"}}></iframe></div>

#### Esegui e fork

https://illa.ai/app/ILAfx4p1C7Ac/detail

### Usa caso: Accedi e reindirizza a pagine diverse

<div style={{
    position: "relative",
    paddingBottom: "calc(56.81216931216932% + 41px)", 
    height: 0
    }}><iframe src="https://builder.illacloud.com/illacloud_demo/deploy/app/ILAex4p1C7Eh" frameborder="1" loading="lazy" webkitallowfullscreen mozallowfullscreen allowfullscreen style={{position: "absolute", top: 0, left: 0, width: "100%", height: "100%", colorScheme: "light"}}></iframe></div>

#### Esegui e fork

https://illa.ai/app/ILAex4p1C7Eh/detail

## ILLA custom functions

### Azione attivazione

#### Struttura

```JavaScript
const exampleData = await actionName.trigger();
```

L'azioneNome è la stringa mostrata nello screenshot, come segue.

![1](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/1.png)

#### Descrizione

In Run Script, la variabile `exampleData` è la stessa di `actionName.data`.

#### Esempio

Per esempio, usiamo l'azione `postgresql1` per interrogare l'email di James.

![2](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/2.png)

Esegui l'azione tramite Esegui script

![3](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/3.png)

`postgresql1.data` è

```JSON
[
  {
    "email": "James@outlook.com",
    "id": "1",
    "img": "https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=1600",
    "name": "James"
  }
]
```

Quando abbiamo bisogno di usare JavaScript per recuperare un'email nell'Ispezione del componente o altrove, possiamo usare quanto segue: `{{postgresql1.data[0].email}}`

![4](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/4.png)

E quando abbiamo bisogno di utilizzare l'email in "Esegui script" dopo aver eseguito la dichiarazione `const exampleData = attendere postgresql1. rigger();`, possiamo usare direttamente `exampleData[0].email`.

Mostra una notifica di successo quando la query è riuscita e il risultato è unico. Mostra una notifica di errore quando il risultato della query non è univoco o quando fallisce.

![5](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/5.png)

```JSON
const exampleData = await postgresql1.trigger();
//show email via notification when the length of the resulting array is 1.
if(exampleData.length==1){
utils. howNotification(
  {
    type:"info",
    titolo:"Recuperato con successo",
    descrizione:exampleData[0]. mail,
    durata: 4500}
);
  }else{
  //else, mostra una notifica fallita
utili. howNotification(
  {
    type:"info",
    title:"Failed to retrieve",
    durata: 4500
  }
);
};
```

### Mostra notifica

#### Struttura

```JavaScript
utils.showNotification(
{
type: "info",
title: "Congratulations",
description: "Retrieved successfully",
duration: 4500
}
)
```

#### Descrizione

| Parametro    | Descrizione                                                         | Tipo di dati                                                                        | Esempio                                |
| ------------ | ------------------------------------------------------------------- | ----------------------------------------------------------------------------------- | -------------------------------------- |
| tipo         | Usato per impostare il tipo di icona nella notifica.                | Stringa uno dei seguenti valori:"info"`default`"success""error""warning"            | tipo: "info"                           |
| titolo       | Usato per impostare il titolo della notifica                        | Stringa                                                                             | title: "Congratulazioni"               |
| descrizione  | Usato per impostare la descrizione                                  | Stringa                                                                             | descrizione: "Recuperato con successo" |
| durata       | Usato per impostare la durata della visualizzazione della notifica. | Numero, in millisecondi (ms)                                                        | durata: 4500                           |

#### Esempio

Mostra notifica quando si fa clic sul pulsante:

![6](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/6.png)

È lo stesso dell'azione Mostra notifica, come mostra la seguente schermata:

![7](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/7.png)

### Componente di controllo

#### Struttura

```JavaScript
componentDisplayName.function()
```

componentDisplayName è la stringa mostrata nello screenshot, come segue.

![8](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/8.png)

#### Descrizione

##### setValue(parametro)

Usato per impostare il valore. Il parametro potrebbe essere un `string` o `number` o `object` o `boolean` o `array` che dipende dal tipo di componente.

###### Componenti supportati

| Componente                                                                                                                                                                | Tipo di parametro                                                     | Esempio                                                                                                                                                                                          |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Ingresso, Testo Modificabile, Area Testo, Dividere, Select, Gruppo Radio, Pulsante Radio, Pulsante Radio, Data, Datario, Passi, Testo, Progresso Barre, Progresso Cerchio | `string`                                                              | `input1.setValue("Ciao mondo")`                                                                                                                                                                  |
| JSON Editor                                                                                                                                                               | `string`                                                              | jsonEditor1.setValue(`{ "firstName": "Chuck", "lastName": "Norris", "age": 80, "bio": "Roundhouse kicking asses since 1940", "password": "noneed", "telephone": "1-800-KICKASS" }`)              |
| Timeline                                                                                                                                                                  | `string`, Separa i valori dei diversi nodi tramite virgola (,)        | `timeline1.setValue("La prima pietra miliare,La seconda pietra miliare")`                                                                                                                        |
| Numero Di Input, Cursore, Tasso                                                                                                                                           | `number`                                                              | `numberInput1.setValue(1000)`                                                                                                                                                                    |
| Cambia                                                                                                                                                                    | `boolean`                                                             | `switch1.setValue(false)`                                                                                                                                                                        |
| Modulo Schema JSON, Modulo                                                                                                                                                | `object`                                                              | `jsonSchemaForm1.setValue({ "firstName": "Chuck", "lastName": "Norris", "age": 80, "bio": "Roundhouse kicking asses since 1940", "password": "noneed", "telephone": "1-800-KICKASS" })`          |
| Gruppo Checkbox, Cascader                                                                                                                                                 | `array`                                                               | `cascader1.setValue(["media_source_2","campaign_2-1"])`                                                                                                                                          |

##### clearValue()

Usato per cancellare il valore

###### Componenti supportati

Ingresso, Ingresso Numero, Testo Modificabile, Area Testo, Caricamento, Editor JSON, Modulo Schema JSON, Commutatore, Seleziona, Multiselect, Gruppo Checkbox, Cascader, Gruppo Radio, Pulsante Radio, Data, Intervallo Di Data, Ora Di Data, Orario Di Data, Testo, Tariffa, Progresso Di Barre, Progresso Di Cerchio, Timeline, Divisore

###### Esempio

```JavaScript
input1.clearValue()
```

##### focus()

Utilizzato per concentrarsi sul componente

###### Componenti supportati

Ingresso, Ingresso numerico, Testo modificabile, Area di testo, Editor JSON, Editor Ricco, Gruppo Radio,

###### Esempio

```JavaScript
input1.focus()
```

##### validate()

Quando hai impostato le condizioni di convalida per un componente, come il formato email, il formato URL, o campo obbligatorio, puoi usare la funzione `validate()` per determinare se soddisfa i requisiti. Se non soddisfa i requisiti, verrà visualizzato un messaggio di convalida.

Imposta le condizioni di convalida:

![9](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/9.png)

Mostra il messaggio di convalida:

![10](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/10.png)

###### Componenti supportati

Ingresso, Ingresso Numero, Testo Modificabile, Area Di Testo, Caricare, Selezionare, Multiselect, Gruppo Casella Di Controllo, Gruppo Radio, Pulsante Radio, Data, Intervallo Di Data, Data Orario, Forma, Tasso

###### Esempio

```JavaScript
input1.validate()
```

##### clearValidation()

Utilizzato per cancellare il messaggio di convalida.

###### Componenti supportati

Ingresso, Ingresso Numero, Testo Modificabile, Area Di Testo, Caricamento, Seleziona, Multiselect, Gruppo Casella Di Controllo, Pulsante Radio, Data, Intervallo Di Data, Data Orario, Tasso

###### Esempio

```JavaScript
input1.clearValidation()
```

##### setSelectedValue(array)

Usato per impostare il valore selezionato di Multiselect. Il parametro dovrebbe essere un array.

###### Componenti supportati

Multiseleziona

###### Esempio

```JavaScript
multiselect1.setSelectedValue(["Opzione 1", "Opzione 3"])
```

##### submit()

Invia i dati del modulo. Quando il metodo di invio viene attivato, prima convalideremo i dati del modulo. Se ci sono errori di convalida, la presentazione del modulo verrà impedita e verranno visualizzati i corrispondenti messaggi di errore. Solo dopo il successo della convalida la trasmissione continua.

###### Componenti supportati

Modulo Schema JSON, Modulo

###### Esempio

```JavaScript
form1.submit()
```

##### toggle()

Utilizzato per cambiare il valore da vero a falso o da falso a vero.

###### Componenti supportati

Cambia

###### Esempio

```JavaScript
switch1.toggle()
```

##### setStartOfRange(number)

Usato per impostare il valore iniziale predefinito del cursore dell'intervallo

###### Componenti supportati

Range Slider

###### Esempio

```JavaScript
rangeSlider1.setStartOfRange(1)
```

##### setEndOfRange(number)

Usato per impostare il valore finale predefinito del cursore dell'intervallo

###### Componenti supportati

Range Slider

###### Esempio

```JavaScript
rangeSlider1.setEndOfRange(9)
```

##### setStartValue(stringa)

Usato per impostare il valore iniziale predefinito

###### Componenti supportati

Intervallo Di Data, Intervallo Di Tempo

###### Esempio

```JavaScript
dateRange1.setStartValue("2023-09-09")
```

##### setEndValue(stringa)

Usato per impostare il valore finale predefinito

###### Componenti supportati

Intervallo Di Data, Intervallo Di Tempo

###### Esempio

```JavaScript
dateRange1.setEndValue("2023-10-09")
```

##### setValueInArray(array)

Usato per impostare gli interruttori il cui valore è vero

###### Componenti supportati

Cambia Gruppo

###### Esempio

```JavaScript
switchGroup1.setValueInArray(["Opzione 1", "Opzione 3"])
```

##### selectPage(numero)

Usato per impostare l'indice della pagina da visualizzare. L'indice è un numero a partire da 0.

###### Componenti supportati

Tabella

###### Esempio

```JavaScript
table1.selectPage(1)
```

##### selectRow(numero)

Usato per impostare l'indice della riga selezionata. L'indice è un numero a partire da 0.

###### Componenti supportati

Tabella

###### Esempio

```JavaScript
table1.selectRow(1)
```

##### clearSelection()

Usato per cancellare la riga selezionata.

###### Componenti supportati

Tabella

###### Esempio

```JavaScript
table1.clearSelection()
```

##### setFilters(array di oggetti, stringa)

Usato per impostare i filtri.

**Il primo parametro** è un array di oggetti. Ogni oggetto rappresenta una condizione di filtraggio. Comprende tre attributi:

**`id`** : Si riferisce all'id di questa colonna. Se questa colonna è il risultato di una query di database, l'id sarebbe il nome della colonna che hai recuperato dalla query. Ad esempio, se la query è `SELECT email AS user_email FROM users` e rinominare `email` come `Email` utilizzando il pannello di destra della tabella, l'id della colonna sarebbe ancora `user_email` Se questa colonna viene aggiunta manualmente usando il pulsante `Add Column` nel pannello di destra, puoi controllare il suo id nella sezione `displayedData` del pannello di sinistra. Tipicamente, sarà una stringa generata casualmente a partire da `column` come `column-320169e8-225a-482d-9853-ad34b3040220`.

**`filterFn`** : il tipo di corrispondenza del filtro. Supportiamo i seguenti tipi: `equalTo` che è lo stesso di `=` in SQL, `notEqualTo` che è lo stesso di `<>` in SQL, `contains` che è lo stesso di `LIKE '%value%'` in SQL, `does NotContain` che è lo stesso di `NOT LIKE '%value%'` in SQL, `lessThan` che è lo stesso di `<` in SQL, `nonLessThan` che è lo stesso di `>=` in SQL, `notMoreThan` che è lo stesso di `<=` in SQL, `empty` che è lo stesso di `IS NULL` in SQL, `notEmpty` che è lo stesso di `IS NOT NULL` in SQL, `before` è usato per confrontare l'ora o la data, che è lo stesso di `>` in SQL, `after` è usato per confrontare l'ora o la data, che è lo stesso di `<` in SQL.

**`value`** : utilizzato per impostare il valore da confrontare.

**Il secondo parametro:** quando ci sono più oggetti di condizioni di filtraggio, determina se hanno una relazione "AND" o una relazione "OR". Impostalo come una stringa `and` per una relazione "AND" e `o` per una relazione "OR".

###### Componenti supportati

Tabella

###### Esempio

```JavaScript
table1.setFilters([{"id":"month", "filterFn":"equalTo", "value":"May"}, {"id":"month", "filterFn":"equalTo", "value":"June"}], "o")
```

##### clearFilters()

Usato per cancellare tutti i filtri

###### Componenti supportati

Tabella

###### Esempio

```JavaScript
table1.clearFilters()
```

##### setSort(string, string)

Usato per impostare l'ordine. **Il primo parametro** è l'id della colonna da ordinare che è un valore di stringa. L'id è lo stesso dell'id menzionato in setFilters(array di oggetti, stringa). **Il secondo parametro** è l'ordine di ordinazione, ascendente o discendente. È impostato usando un valore di stringa `ascend` o `descend`.

###### Componenti supportati

Tabella

###### Esempio

```JavaScript
table1.setSort("incomes", "descendo")
```

##### setCurrentViewKey(stringa)

Usa la chiave che è un valore di stringa della vista per impostare la vista mostrata.

###### Componenti supportati

Contenitore

###### Esempio

```JavaScript
container1.setCurrentViewKey("View 2")
```

##### setCurrentViewIndex(number)

Usare l'indice che è un valore numerico a partire da 0 della vista per impostare la vista mostrata.

###### Componenti supportati

Contenitore

###### Esempio

```JavaScript
container1.setCurrentViewIndex(1)
```

##### showNextView(boolean)

Usato per mostrare la vista successiva. Il parametro è un valore booleano che determina se ripassare dalla fine all'inizio.

###### Componenti supportati

Contenitore

###### Esempio

```JavaScript
container1.showNextView(true)
```

##### showNextVisibleView(boolean)

Usato per mostrare la prossima vista visibile. A differenza del comportamento della funzione `showNextView(boolean)`, questa funzione offre una migliore funzionalità di commutazione della vista saltando qualsiasi vista nascosta durante la transizione. Il parametro è un valore booleano che determina se ripassare dalla fine all'inizio.

###### Componenti supportati

Contenitore

###### Esempio

```JavaScript
container1.showNextVisibleView(false)
```

##### showPreviousView()

Usato per mostrare la vista precedente. Il parametro è un valore booleano che determina se eseguire il ciclo dall'inizio alla fine.

###### Componenti supportati

Contenitore

###### Esempio

```JavaScript
container1.showPreviousView(true)
```

##### showPreviousVisibleView()

Usato per mostrare la vista visibile precedente. A differenza del comportamento della funzione `showPreviousView(boolean)`, questa funzione offre una migliore funzionalità di commutazione della vista saltando qualsiasi vista nascosta durante la transizione. Il parametro è un valore booleano che determina se eseguire il ciclo dall'inizio alla fine.

###### Componenti supportati

Contenitore

###### Esempio

```JavaScript
container1.showPreviousVisibleView(true)
```

##### reset()

Usato per reimpostare il valore al valore predefinito.

###### Componenti supportati

Modulo

###### Esempio

```JavaScript
form1.reset()
```

##### resetValue()

Usato per reimpostare il valore al valore predefinito.

###### Componenti supportati

Passi

###### Esempio

```JavaScript
steps1.resetValue()
```

##### openModal()

Utilizzato per aprire un modal

###### Componenti supportati

Modale

###### Esempio

```JavaScript
modal1.openModal()
```

##### closeModal()

Usato per chiudere un modal

###### Componenti supportati

Modale

###### Esempio

```JavaScript
modal1.closeModal()
```

##### setImageUrl(stringa)

Usato per impostare l'URL di origine dell'immagine. Può essere un Base64 o un URL che punta a un'immagine sul web.

###### Componenti supportati

Immagine

###### Esempio

```JavaScript
image1.setImageUrl("https://cloud-api.illacloud.com/drive/f/83095b77-1180-487e-86db-ff117e6083e5")
```

```JavaScript
image1.setImageUrl("data:image/png;base64,iVBORw0KGgoAA...II=")
```

##### clearReplyMessage()

Usato per cancellare il messaggio di risposta citato sopra la casella di input.

###### Componenti supportati

Chat

###### Esempio

```JavaScript
chat1.clearReplyMessage()
```

##### setPrimaryValue(number)

Usato per impostare il valore primario delle statistiche.

###### Componenti supportati

Statistiche

###### Esempio

```JavaScript
statistic1.setPrimaryValue(100)
```

##### resetPrimaryValue()

Utilizzato per reimpostare il valore primario al valore primario predefinito delle statistiche.

###### Componenti supportati

Statistiche

###### Esempio

```JavaScript
statistic1.resetPrimaryValue()
```

##### setFileUrl(stringa)

Usato per impostare l'URL del file. Può essere un Base64 o un URL che punta a un PDF sul web.

###### Componenti supportati

PDF

###### Esempio

```JavaScript
pdf1.setFileUrl("https://upload.wikimedia.org/wikipedia/commons/e/ee/Guideline_No._GD-Ed-2214_Marman_Clamp_Systems_Design_Guidelines.pdf")
```

##### play()

Utilizzato per riprodurre video o audio.

###### Componenti supportati

Video, Audio

###### Esempio

```JavaScript
video1.play()
```

##### pause()

Utilizzato per mettere in pausa video o audio.

###### Componenti supportati

Video, Audio

###### Esempio

```JavaScript
video1.pause()
```

##### showControls(boolean)

Usato per impostare se mostrare i controlli.

###### Componenti supportati

Video

###### Esempio

```JavaScript
video1.showControls(true)
```

##### setVideoUrl(stringa)

Usato per impostare l'URL del video. Può essere un Base64 o un URL video sui siti web multimediali.

###### Componenti supportati

Video

###### Esempio

```JavaScript
video1.setVideoUrl("https://youtu.be/8sUovZlBh_M")
```

##### setVolume(numero)

Usato per impostare il volume. Il parametro è un valore numerico compreso tra 0 e 1.

###### Componenti supportati

Video, Audio

###### Esempio

`video1.setVolume(0.5)`

##### setSpeed(number)

Usato per impostare la velocità. Il parametro è un valore numerico compreso tra 0.25 e 2.

###### Componenti supportati

Video, Audio

###### Esempio

```JavaScript
video1.setSpeed(0.5)
```

##### setLoop(boolean)

Usato per impostare se eseguire il ciclo di riproduzione.

###### Componenti supportati

Video, Audio

###### Esempio

```JavaScript
video1.setLoop(falso)
```

##### seekTo(numero)

Usato per cercare una specifica posizione temporale. Il parametro è un valore numerico, misurato in secondi (s). Ad esempio, per cercare la posizione temporale 5:35, si utilizzerebbe il valore 335.

###### Componenti supportati

Video, Audio

###### Esempio

```JavaScript
video1.seekTo(335)
```

##### mute(boolean)

Usato per impostare l'audio o no.

###### Componenti supportati

Video, Audio

###### Esempio

```JavaScript
video1.mute(true)
```

##### setAudioUrl(stringa)

Usato per impostare l'URL dell'audio. Può essere un Base64 o un URL video sui siti web multimediali.

###### Componenti supportati

Audio

###### Esempio

```JavaScript
video1.setAudioUrl("https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3")
```

##### slickNext()

Usato per passare all'immagine successiva.

###### Componenti supportati

Carousel

###### Esempio

```JavaScript
carousel1.slickNext()
```

##### slickPrevious()

Usato per passare all'immagine precedente.

###### Componenti supportati

Carousel

###### Esempio

```JavaScript
carousel1.slickPrevious()
```

##### setSrc()

Usato per impostare l'URL di origine di IFrame.

###### Componenti supportati

IFrame

###### Esempio

```JavaScript
iframe1.setSrc("https://www.nasa.gov/")
```

##### setMarkers(array)

Usato per impostare i marcatori sulla mappa. Il parametro dovrebbe essere un array di oggetti. I campi di latitudine e longitudine in ogni oggetto devono essere gli stessi dei campi impostati nel pannello di destra

###### Componenti supportati

Mappa

###### Esempio

```JavaScript
map1.setMarkers([
{
    "lat":57.14009563040699,
    "lng":-114.6018657894011
 },{
     "lat":55.40432513713809,
     "lng":-112.98252263795787
 },{
     "lat":57.841288754888545,
     "lng":-103.3518657894011
 }
])
```

##### resetMarkers()

Usato per reimpostare i marcatori ai marcatori predefiniti.

###### Componenti supportati

Mappa

###### Esempio

```JavaScript
map1.resetMarkers()
```

### Vai all'URL

#### Struttura

```JavaScript
utils.goToURL({
url:string,
newTab:boolean
})
```

#### Descrizione

Usa un oggetto per impostarlo. Ci sono 2 attributi nell'oggetto. Il primo attributo è `url`. Il suo valore è un URL completo, incluso 'https://' o 'http://', ed è di tipo stringa. Il secondo attributo è `newTab`. È un booleano usato per impostare se aprire l'URL in una nuova scheda.

#### Esempio

```JavaScript
utils.goToURL({
url:"https://www.illacloud.com",
newTab:true
})
```

### Copia negli appunti

#### Struttura

```JavaScript
utils.copyToClipboard(stringa)
```

#### Descrizione

Usato per copiare una stringa

#### Esempio

```JavaScript
utils.copyToClipboard("il testo da copiare")
```

### Imposta router

#### Struttura

```JavaScript
utils.setRouter({
pagePath:string;
viewPath:string
})
```

#### Descrizione

Utilizzato per cambiare la pagina nelle applicazioni ILLA. Ci sono 2 attributi nell'oggetto.

Il primo attributo è `pagePath`. Il valore di pagePath è mostrato nella seguente schermata senza `/`.

![11](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/11.png)

Il secondo attributo è `viewPath`. Il valore di viewPath è mostrato nella seguente schermata senza `/`.

![12](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/12.png)

#### Esempio

```JavaScript
utils.setRouter({
pagePath:"page2", 
viewPath:"sub-page1"
})
```

### Salva su ILLA Drive

#### Struttura

```JavaScript
utils.saveToILLADrive({
fileName:string,
fileData:string,
fileType:string,
folder:string,
allowAnonymous:boolean,
replace:boolean
})
```

#### Descrizione

Usato per salvare un file su ILLA Drive.

`fileName`: Nome con estensione del file dopo il caricamento su ILLA Drive.

`fileData`: Base64 o dati di file grezzi, come JSON, CSV, testo normale, ecc.

`fileType`: Uno dei seguenti valori: Auto, testo semplice, JPEG, PNG, SVG, JSON, CSV, TSV, Excel(.xlsx). Quando si utilizza "Auto", cercheremo di determinare il tipo di file in base all'estensione del file o ai dati del file.

`folder`: Cartella di destinazione per il caricamento dei file. Lasciare vuoto per caricare nella cartella radice.

`allowAnonimo`: Usato per impostare se l'accesso utente anonimo è consentito. Se si prevede di impostare l'applicazione come pubblico, l'accesso anonimo deve essere abilitato. Per la sicurezza dei dati, dei file o delle cartelle accessibili in modo anonimo devono essere inseriti nella cartella anonima.

![13](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/13.png)

`replace`: Usato per impostare quando ci sono file con lo stesso nome nella stessa directory, sostituire il file esistente con un nuovo file o rinominare automaticamente il nuovo file.

#### Esempio

```JavaScript
//use upload1 to pick files from device and upload to apps folder. 
utils.saveToILLADrive({
fileName:upload1.files[0].name,
fileData:upload1. iles[0].dataURI,
fileType:"PNG",
cartella:"apps",
allowAnonimo:false,
sostituire:true
})
```

```JavaScript
//carica un file di testo.  
utils.saveToILLADrive({
fileName:"test.txt",
fileData:"abc",
fileType:"Plain text",
folder:"apps",
allowAnonymous:false,
replace:true
})
```

### Scarica da ILLA Drive

#### Struttura

```JavaScript
utils.downloadFromILLADrive({
    downloadInfo:[{
        tinyURL:string,
        fileID:string
        }],
    asZip:boolean
})
```

#### Descrizione

Utilizzato per scaricare file da ILLA Drive.

`downloadInfo`: un array di oggetti tra cui tinyURL e fileID. È possibile utilizzare il componente Drive selettore file per scegliere i file da ILLA Drive e ottenere il `downloadInfo` tramite drivePicker1.value

`asZip`: usato per impostare se scaricare i file come Zip.

#### Esempio

```JavaScript
utils.downloadFromILLADrive({
    downloadInfo:drivePicker1.value,
    asZip:true
})
```

### Scarica

#### Struttura

```JavaScript
utils.downloadFile({
    fileType:string,
    fileName:string,
    data:anyType
})
```

#### Descrizione

Utilizzato per esportare i dati sul tuo dispositivo.

`fileType`: Uno dei seguenti valori: Auto, testo semplice, JPEG, PNG, SVG, JSON, CSV, TSV, Excel(.xlsx). Quando si utilizza "Auto", cercheremo di determinare il tipo di file in base all'estensione del file o ai dati del file.

`fileName`: un nome con estensione.

`data`: dati del file.

#### Esempio

```JavaScript
//scarica i dati della tabella come CSV
utils.downloadFile({
    fileType:"CSV",
    fileName:"text.csv",
    data: table2.dataSourceJS
})
```

```JavaScript
//download image
utils.downloadFile({
    fileType:"PNG",
    fileName:"text.png",
    data: image1.imageSrc
})
```

### Imposta dati globali

#### Imposta valore dati globale

##### Struttura

```JavaScript
utils.setGlobalDataValue({
key:string, 
value:any
})
```

##### Descrizione

Usato per impostare il valore di gobalData

`key`: il displayName di globalData come mostra la seguente schermata.

![14](https://cdn.illacloud.com/official-website/img/docs/new-doc/run-script/14.png)

`value`: il valore da impostare

##### Esempio

```JavaScript
//use input5 to get the user input value and set as the value of stringstate. 
utils.setGlobalDataValue({
key:"stringState", 
value:input5.value
})
```

#### Imposta dati globali in

##### Struttura

```JavaScript
utils.setGlobalDataIn({
key:string, 
path:string, 
value:any
})
```

##### Descrizione

Quando i dati globali sono un array o un oggetto, usa setGlobalDataIn per modificare il valore corrispondente a un indice specifico in un array o per modificare il valore corrispondente a una chiave specifica in un oggetto.

`key`: il displayName di globalData.

`path`: l'indice del valore che si intende aggiornare nell'array o la chiave nell'oggetto. Ad esempio, per impostare il secondo valore nell'array, il percorso è 1 (l'indice). Per impostare il valore dell'attributo key1, il percorso è key1.

`value`: il valore da impostare

##### Esempio

```JavaScript
//objectState is an object: {"key1":"value1", "key2":"value2"}, to set the 
utils.setGlobalDataIn({
key:"objectState", 
path:"key2", 
value:input7.value
})
```

## Librerie integrate

| **Libreria**       | **Doc**                                                               | **Come usarlo nel Builder ILLA**    | \*\*Esempio                                                         |
| ------------------ | --------------------------------------------------------------------- | ----------------------------------- | ------------------------------------------------------------------- |
| Lodash             | https://lodash.com/docs/4.17.15                                       | `_`                                 | `_.concat(array, 2, [3], [[4]]);`                                   |
| Day.js             | https://day.js.org/                                                   | `dayjs`                             | `dayjs(new Date())`                                                 |
| uuuid              | <https://www.npmjs.com/package/uuid>                                  | `uuid`                              | `uuid.parse()`                                                      |
| numbro             | https://numbrojs.com/                                                 | `numbro`                            | `numbro(1000).format({thousandSeparated: true})`                    |
| Papa               | https://www.papaparse.com/docs                                        | `Papa`                              | `Papa.parse(url, {download: true, // resto di configurazione... })` |

## Valore delle azioni, componenti...

Usa `displayName.xxx` per usare il valore di azioni, componenti o altri globalData. Si prega di notare che nel Run Script, queste variabili possono essere direttamente accessibili senza usare i riferimenti `{{`.

```JavaScript
utils.downloadFromILLADrive({
    downloadInfo:{{drivePicker1.value}},//❌ 
    asZip:true
})

utils.downloadFromILLADrive({
    downloadInfo:drivePicker1.value,//:check_mark_button:
    asZip:true
})
```
